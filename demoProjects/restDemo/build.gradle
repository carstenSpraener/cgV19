buildscript {
    repositories {
        mavenCentral();
        maven {
            url="${project.rootDir}/../repo"
        }
        maven {
            url="${project.rootDir}/../../repo"
        }
    }
    if( !project.ext.hasProperty("group") ) {
        project.ext.group = 'de.spraener.nxtgen'
        project.ext.version = '21.0.0-SNAPSHOT'
    }
    dependencies {
        classpath "${project.ext.group}:cgV19-core:${project.ext.version}"
        classpath "${project.ext.group}:cgV19-gradle:${project.ext.version}"
    }
}

plugins {
    id 'application'
}
apply plugin: 'de.spraener.nxtgen.cgV19'

repositories {
    mavenCentral()
}

cgV19 {
    //model='./restDemo.oom'
    // If you arer using VisualParadigm
    model='http://localhost:7001/de'
}

tasks.withType(JavaCompile) {
    compileTask -> compileTask.dependsOn generate
}

sourceSets {
    main {
        java {
            srcDirs 'src/main/java'
            srcDirs 'src/main/java-gen'
        }
    }
}

def springBootVersion='2.5.6'
dependencies {
    cartridge "${project.ext.group}:cgV19-core:${project.ext.version}"
    cartridge "${project.ext.group}:cgV19-oom:${project.ext.version}"
    cartridge "${project.ext.group}:cgV19-RESTCartridge:${project.ext.version}"
    //UNDER CONSTRUCTION! cartridge "${project.ext.group}:cgV19-WebFlowCartridge:${project.ext.version}"

    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: springBootVersion
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-thymeleaf', version: springBootVersion
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa', version: springBootVersion
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-cache', version: springBootVersion
    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-actuator', version: springBootVersion

    implementation "org.springframework.webflow:spring-webflow:2.5.1.RELEASE"
    implementation "org.springframework.webflow:org.springframework.js:2.0.5.RELEASE"
    implementation "org.springframework.boot:spring-boot-starter-validation:${springBootVersion}"
    implementation "org.springframework.boot:spring-boot-starter-thymeleaf:${springBootVersion}"
    implementation 'org.springframework.statemachine:spring-statemachine-core:3.2.0'
    implementation 'javax.validation:validation-api:2.0.1.Final'

    implementation 'com.h2database:h2:2.1.210'
    implementation group: 'com.google.code.gson', name: 'gson', version: '2.8.5'
    implementation 'com.google.guava:guava:29.0-jre'
    implementation 'jakarta.xml.bind:jakarta.xml.bind-api:2.3.3'
    implementation "${project.ext.group}:cgV19-RESTCartridge:${project.ext.version}"

    testImplementation 'junit:junit:4.13'
    testImplementation "${project.ext.group}:cgV19-core:${project.ext.version}"
    testImplementation "${project.ext.group}:cgV19-oom:${project.ext.version}"
    testImplementation "${project.ext.group}:cgV19-RESTCartridge:${project.ext.version}"
    testImplementation "${project.ext.group}:cgV19-WebFlowCartridge:${project.ext.version}"
    testImplementation 'org.apache.httpcomponents:httpclient:4.5.10'
}

application {
    // Define the main class for the application.
    mainClass = 'de.csp.demo.rest.SpringBootApp'
}
